(this["webpackJsonptimesheet-maker"]=this["webpackJsonptimesheet-maker"]||[]).push([[0],{29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),o=n.n(a),i=n(21),c=n.n(i),s=(n(29),n(7)),u=n(9),d=n(2);n(30);function l(e,t){return e.toISOString()===t.toISOString()}function m(e,t){return e.some((function(e){return l(e,t)}))}function f(e){return JSON.parse(e,(function(e,t){return e.toLowerCase().endsWith("date")||e.toLowerCase().endsWith("time")?new Date(t):t}))}function h(e){var t=b(e,-e.getDay());return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function p(e,t,n,r){var a=new Date(e);return a.setHours(t),a.setMinutes(n),a.setSeconds(r),a.setMilliseconds(0),a}function b(e,t,n,r,a){return new Date(e.getTime()+24*(null!==t&&void 0!==t?t:0)*60*60*1e3+60*(null!==n&&void 0!==n?n:0)*60*1e3+60*(null!==r&&void 0!==r?r:0)*1e3+1e3*(null!==a&&void 0!==a?a:0))}function j(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?"/".concat(e.getFullYear()):"";return"".concat(e.getDate(),"/").concat(e.getMonth()+1)+n}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=h(e);return"".concat(j(n,t)," \u2013 ").concat(j(b(n,7),t))}var O=n(23),v="timeSheetDates";function g(){var e=localStorage.getItem(v);return null===e?[]:f(e).map((function(e){return new Date(e)}))}function T(e){e.forEach(k),localStorage.setItem(v,JSON.stringify(e))}function w(e){k(e);var t=g();m(t,e)||T([e].concat(Object(O.a)(t)))}function y(e){k(e),T(g().filter((function(t){return!l(e,t)})))}function D(e,t){k(e),localStorage.setItem("timeSheet-".concat(e.toISOString()),JSON.stringify(t)),w(e)}function x(e){k(e);var t=localStorage.getItem("timeSheet-".concat(e.toISOString()));return null===t?null:f(t)}function C(e){return k(e),y(e),!!function(e){return k(e),null!==localStorage.getItem("timeSheet-".concat(e.toISOString()))}(e)&&(localStorage.removeItem("timeSheet-".concat(e.toISOString())),!0)}function k(e){if(!l(e,h(e)))throw new Error("Date ".concat(e," does not match start of week ").concat(h(e)))}var N,E=n(12);!function(e){e[e.Sunday=0]="Sunday",e[e.Monday=1]="Monday",e[e.Tuesday=2]="Tuesday",e[e.Wednesday=3]="Wednesday",e[e.Thursday=4]="Thursday",e[e.Friday=5]="Friday",e[e.Saturday=6]="Saturday"}(N||(N={}));var I=[N.Sunday,N.Monday,N.Tuesday,N.Wednesday,N.Thursday,N.Friday,N.Saturday];function M(e){return{weekStartDate:h(e),timeTablePropsMap:{}}}function P(e,t){return{personName:t,date:e.date,dayColumnsProps:I.reduce((function(n,r){return n[r]=function(e,t,n){var r=b(p(e.date,8,0,0),n),a=b(r,0,0,30);return{personName:t,isDayOff:!0,dow:n,startTime:r,endTime:a,breaksLength:0}}(e,t,r),n}),{})}}function U(e,t){return{personName:e.personName,date:t,dayColumnsProps:I.reduce((function(n,r){return n[r]=function(e,t,n){var r=b(n,t);return Object(E.a)(Object(E.a)({},e),{},{startTime:p(r,e.startTime.getHours(),e.startTime.getMinutes(),e.startTime.getSeconds()),endTime:p(r,e.endTime.getHours(),e.endTime.getMinutes(),e.endTime.getSeconds())})}(e.dayColumnsProps[r],r,t),n}),{})}}var F="None";function A(e){var t=Object(a.useState)(new Date(Date.now())),n=Object(s.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(!1),u=Object(s.a)(c,2),l=u[0],f=u[1],p=Object(a.useState)(F),O=Object(s.a)(p,2),v=O[0],g=O[1];return Object(r.jsxs)(r.Fragment,{children:[l&&Object(r.jsx)(d.a,{to:"/".concat(o.toISOString())}),Object(r.jsx)("h2",{children:"Home"}),Object(r.jsxs)("form",{onSubmit:function(t){return function(e,t,n,r,a,o){e.preventDefault(),H(a,o);var i=h(t);if(m(a,i))return void alert("Time sheet already exists for ".concat(j(t)," (week ").concat(S(i),")"));if(o!==F){var c=B(a,o),s=x(c);if(null===s)throw new Error("Saved week ".concat(S(c)," has no local saved data"));D(i,function(e,t){var n={};for(var r in e.timeTablePropsMap)n[r]=U(e.timeTablePropsMap[r],t);return{weekStartDate:h(t),timeTablePropsMap:n}}(s,i))}r(i),n(!0)}(t,o,f,e.addTimeSheetDate,e.timeSheetDates,v)},children:[Object(r.jsx)("label",{htmlFor:"date",children:"Date:"}),Object(r.jsx)("input",{name:"date",type:"date",value:L(o),onChange:function(e){return function(e,t){var n=e.target.valueAsDate;if(null===n)throw new Error("Failed to set date in ".concat(A.name));var r=b(n,0,0,n.getTimezoneOffset());t(r)}(e,i)}}),Object(r.jsx)("label",{htmlFor:"copyFrom",children:"Copy from:"}),Object(r.jsxs)("select",{value:v,onChange:function(t){return function(e,t,n){var r=t.target.value;if(null===r)throw new Error("Failed to set 'copy from' time sheet in ".concat(A.name));H(e,r),n(r)}(e.timeSheetDates,t,g)},children:[Object(r.jsx)("option",{value:F,children:"None"},F),e.timeSheetDates.map((function(e){return Object(r.jsx)("option",{value:e.toISOString(),children:S(e,!0)},e.toISOString())}))]}),Object(r.jsx)("input",{type:"submit",value:"Add new time sheet"})]})]})}function L(e){var t=e.getFullYear().toString(),n=(e.getMonth()+1).toString().padStart(2,"0"),r=e.getDate().toString().padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function H(e,t){if(t!==F&&!B(e,t))throw new Error("Selected time sheet week ".concat(t," is not none or an existing week"))}function B(e,t){var n=e.filter((function(e){return e.toISOString()===t}));if(1!==n.length)throw new Error("".concat(t," matches ").concat(n.length," dates from ").concat(e,", expected 1 match"));return n[0]}var W=A;var R=function(e){return Object(r.jsx)("input",{className:"timeCellInput",type:"time",min:"08:00:00",max:"21:00:00",step:900,value:function(e){var t=e.getHours().toString().padStart(2,"0"),n=e.getMinutes().toString().padStart(2,"0"),r=e.getSeconds().toString().padStart(2,"0");return"".concat(t,":").concat(n,":").concat(r)}(e.time),placeholder:"Set the time",onChange:function(t){return function(t){var n=t.target.valueAsDate;if(null===n)return;var r=new Date(e.time);r.setHours(n.getUTCHours()),r.setMinutes(n.getUTCMinutes()),r.setSeconds(n.getUTCSeconds()),r.setMilliseconds(n.getUTCMilliseconds()),e.onTimeChange(r)}(t)}})};function J(e){if(void 0!==e.onNumberChange)return function(t){e.onNumberChange(t.target.valueAsNumber)};if(!e.readOnly)throw new Error("No number change handler provided for non-readonly input")}var Y=function(e){return Object(r.jsx)("input",{className:"numberCellInput",type:"number",min:"0",step:e.step,readOnly:e.readOnly,value:e.number,placeholder:"Set the time",onChange:J(e)})};var z,K=function(e){return Object(r.jsx)("input",{className:"dayOfWeekCellInput",type:"text",readOnly:!0,value:["SUN","MON","TUE","WED","THU","FRI","SAT"][e.dow]})},q=n(14);function G(e,t,n){switch(n.type){case z.StartTimeUpdate:case z.EndTimeUpdate:case z.BreaksLengthUpdate:case z.IsDayOffUpdate:return Q(t,n);case z.SetState:return n.value;case z.AddTimeTable:return function(e,t,n){if(void 0===n.personName)throw new Error("Person name is undefined for time sheet add");if(n.personName in t.timeTablePropsMap)throw new Error("Person name ".concat(n.personName," cannot be added because they already have a time table"));var r=Object(q.cloneDeep)(t);return r.timeTablePropsMap[n.personName]=P(e,n.personName),r}(e,t,n);case z.DeleteTimeTable:return function(e,t){if(void 0===t.personName)throw new Error("Person name is undefined for time sheet delete");if(!(t.personName in e.timeTablePropsMap))throw new Error("Person name ".concat(t.personName," cannot be deleted because they have no time table"));var n=Object(q.cloneDeep)(e);return delete n.timeTablePropsMap[t.personName],n}(t,n);default:throw new Error("Action type ".concat(n.type," is not supported by ").concat(G))}}function Q(e,t){if(void 0===t.personName)throw new Error("Person name is undefined for time sheet update");if(void 0===t.dow)throw new Error("Day of week is undefined for time sheet update");var n=e.timeTablePropsMap[t.personName].dayColumnsProps[t.dow],r=Object(E.a)({},n);switch(t.type){case z.StartTimeUpdate:r.startTime=t.value;break;case z.EndTimeUpdate:r.endTime=t.value;break;case z.BreaksLengthUpdate:r.breaksLength=t.value;break;case z.IsDayOffUpdate:r.isDayOff=t.value;break;default:throw new Error("Action type ".concat(t.type," is not supported by ").concat(Q))}var a=Object(q.cloneDeep)(e);return a.timeTablePropsMap[t.personName].dayColumnsProps[t.dow]=r,a}!function(e){e[e.StartTimeUpdate=0]="StartTimeUpdate",e[e.EndTimeUpdate=1]="EndTimeUpdate",e[e.BreaksLengthUpdate=2]="BreaksLengthUpdate",e[e.IsDayOffUpdate=3]="IsDayOffUpdate",e[e.SetState=4]="SetState",e[e.AddTimeTable=5]="AddTimeTable",e[e.DeleteTimeTable=6]="DeleteTimeTable"}(z||(z={}));var V=function(e){return Object(r.jsx)("input",{className:"checkBoxCellInput",type:"checkbox",value:e.value,onChange:function(){e.onCheckedChange(!e.isChecked)},checked:e.isChecked})};function X(e){return e.isDayOff?0:e.endTime.getHours()-e.startTime.getHours()-e.breaksLength/60+(e.endTime.getMinutes()-e.startTime.getMinutes())/60+(e.endTime.getSeconds()-e.startTime.getSeconds())/3600}function Z(e,t,n,r){if(null===t)throw new Error("Context cannot be null in number change");t.dispatch({personName:e.personName,dow:e.dow,type:n,value:r})}var $=function e(t){var n,i=Object(a.useContext)(re);if(null===i)throw new Error("Time sheet context is null in ".concat(e.name));var c=Object(r.jsx)(K,{dow:t.dow},0),s=Object(r.jsx)(V,{isChecked:null!==(n=t.isDayOff)&&void 0!==n&&n,onCheckedChange:function(e){return function(e,t,n){Z(e,t,z.IsDayOffUpdate,n)}(t,i,e)},value:t.dow.toString()},5);return t.isDayOff?o.a.Children.toArray([c,Object(r.jsx)(r.Fragment,{}),Object(r.jsx)(r.Fragment,{}),Object(r.jsx)(r.Fragment,{}),Object(r.jsx)(r.Fragment,{}),s]):o.a.Children.toArray([c,Object(r.jsx)(R,{time:t.startTime,onTimeChange:function(e){return function(e,t,n){Z(e,t,z.StartTimeUpdate,n)}(t,i,e)}},1),Object(r.jsx)(R,{time:t.endTime,onTimeChange:function(e){return function(e,t,n){Z(e,t,z.EndTimeUpdate,n)}(t,i,e)}},2),Object(r.jsx)(Y,{number:t.breaksLength,step:15,onNumberChange:function(e){return function(e,t,n){Z(e,t,z.BreaksLengthUpdate,n)}(t,i,e)}},3),Object(r.jsx)(Y,{number:X(t),readOnly:!0},4),s])},_=["PERSON"],ee=["DAY","START","END","UNPAID BREAKS (MINUTES)","DAILY HOURS TOTAL","IS DAY OFF?"];function te(e){return I.map((function(t){return X(e.dayColumnsProps[t])})).reduce((function(e,t){return e+t}),0)}var ne=function(e){var t=Object(a.useContext)(re);if(null===t)throw new Error("Time sheet context is null in ".concat($.name));var n,o=I.map((function(t){return e.dayColumnsProps[t]})).map((function(e){return $(e)})),i=(n=o)[0].map((function(e,t){return n.map((function(e){return e[t]}))})),c=ee.map((function(e,t){return{rowName:e,transposedDayColumnElements:i[t]}}));return Object(r.jsxs)("table",{children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsxs)("th",{scope:"row",children:[_,Object(r.jsx)("button",{onClick:function(){return n=t,r=e.personName,void n.dispatch({type:z.DeleteTimeTable,personName:r});var n,r},children:"Delete"})]}),Object(r.jsxs)("td",{colSpan:I.length,children:[e.personName,": ",te(e)," hours"]})]})}),Object(r.jsx)("tbody",{children:c.map((function(e){return Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{scope:"row",children:e.rowName}),e.transposedDayColumnElements.map((function(e,t){return Object(r.jsx)("td",{children:e},t)}))]},e.rowName)}))})]})},re=o.a.createContext(null);function ae(e){return Object.values(e.timeTablePropsMap).map((function(e){return te(e)})).reduce((function(e,t){return e+t}),0)}var oe=function(e){var t,n=function(e){var t=Object(a.useReducer)((function(t,n){return G(e,t,n)}),M(e.date)),n=Object(s.a)(t,2),r=n[0],o=n[1];return Object(a.useEffect)((function(){var t=x(h(e.date));o({type:z.SetState,value:null!==t&&void 0!==t?t:M(e.date)})}),[e.date]),[r,o]}(e),i=Object(s.a)(n,2),c=i[0],u=i[1],d={weekStartDate:c.weekStartDate,dispatch:u},l=Object(a.useState)(""),m=Object(s.a)(l,2),f=m[0],p=m[1],b=Object(a.useRef)(null);return Object(r.jsxs)(re.Provider,{value:d,children:[Object(r.jsxs)("h2",{children:["Week: ",S(e.date)]}),Object(r.jsx)("button",{disabled:(c.weekStartDate,!1),onClick:function(){return function(e,t,n){D(e,t),n(e),window.alert("Successfully saved time sheet for ".concat(S(e)))}(c.weekStartDate,c,e.addTimeSheetDate)},children:"Save Time Sheet To Local Storage"}),Object(r.jsx)("button",{disabled:(c.weekStartDate,t=e.isDeletedTimeSheetDate,!!t),onClick:function(){return function(e,t){window.confirm("Are you sure you want to delete time sheet save data for ".concat(S(e),"?"))&&(t(e),C(e),window.alert("Successfully deleted time sheet save data for ".concat(S(e))))}(c.weekStartDate,e.deleteTimeSheetDate)},children:"Delete Time Sheet From Local Storage"}),Object(r.jsxs)("form",{onSubmit:function(e){return function(e,t,n,r,a){if(e.preventDefault(),""===n)return void alert("Cannot add timetable for nameless person");t.dispatch({type:z.AddTimeTable,personName:n}),r(""),a.current.focus()}(e,d,f,p,b)},children:[Object(r.jsx)("label",{htmlFor:"person",children:"Person:"}),Object(r.jsx)("input",{name:"person",type:"text",ref:b,value:f,onChange:function(e){return p(e.target.value)}}),Object(r.jsx)("input",{type:"submit",value:"Add new timetable"})]}),Object(r.jsxs)("p",{children:["Total hours working in week: ",ae(c)]}),Object.keys(c.timeTablePropsMap).map((function(e){return Object(r.jsx)("div",{className:"container",children:o.a.createElement(ne,c.timeTablePropsMap[e])},e)}))]})};var ie=function(e){var t=Object(d.g)(),n=new Date(t.date);return Object(r.jsxs)(r.Fragment,{children:[e.isDeletedTimeSheetDate(n)&&Object(r.jsx)(d.a,{to:"/"}),Object(r.jsx)("section",{className:"time-sheet",children:Object(r.jsx)(oe,{date:n,addTimeSheetDate:e.addTimeSheetDate,deleteTimeSheetDate:e.deleteTimeSheetDate,isDeletedTimeSheetDate:e.isDeletedTimeSheetDate(n)})})]})};function ce(e,t,n){var r=h(n);m(e,r)||(w(r),t(g()))}var se=function(){var e=Object(a.useState)(g()),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(r.jsx)(u.a,{basename:"/timesheet-maker",children:Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("nav",{children:Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/",children:"Home"})}),n.sort().map((function(e){return Object(r.jsx)("li",{children:Object(r.jsx)(u.b,{to:"/".concat(e.toISOString()),children:S(e,!0)})},e.toISOString())}))]})}),Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{path:"/:date",children:Object(r.jsx)(ie,{isDeletedTimeSheetDate:function(e){return function(e,t){var n=h(t);return!m(e,n)}(n,e)},addTimeSheetDate:function(e){return ce(n,o,e)},deleteTimeSheetDate:function(e){return function(e,t,n){var r=h(n);m(e,r)&&(y(r),t(g()))}(n,o,e)}})}),Object(r.jsx)(d.b,{path:"",children:Object(r.jsx)(W,{timeSheetDates:n,addTimeSheetDate:function(e){return ce(n,o,e)}})})]})]})})},ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),o(e),i(e)}))};c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(se,{})}),document.getElementById("root")),ue()}},[[36,1,2]]]);
//# sourceMappingURL=main.69055c18.chunk.js.map